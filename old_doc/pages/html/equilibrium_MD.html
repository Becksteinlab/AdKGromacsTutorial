<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5. Equilibrium molecular dynamics &mdash; Practical 13: AdK Tutorial 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Practical 13: AdK Tutorial 1.0 documentation" href="index.html" />
    <link rel="next" title="6. Trajectory visualization" href="trajectory_visualization.html" />
    <link rel="prev" title="4. Position restraints MD" href="position_restraints_MD.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="trajectory_visualization.html" title="6. Trajectory visualization"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="position_restraints_MD.html" title="4. Position restraints MD"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Practical 13: AdK Tutorial 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="equilibrium-molecular-dynamics">
<span id="equilibrium-md"></span><h1>5. Equilibrium molecular dynamics<a class="headerlink" href="#equilibrium-molecular-dynamics" title="Permalink to this headline">¶</a></h1>
<div class="section" id="setup-the-production-run">
<h2>5.1. Setup the production run<a class="headerlink" href="#setup-the-production-run" title="Permalink to this headline">¶</a></h2>
<p>As usual, we must tell Gromacs what it will be doing using <a class="reference external" href="http://manual.gromacs.org/current/online/grompp.html">grompp</a>
before we can perform our production simulation. Since we want to
start our run where we left off (after doing equilibration), we
prepare the TPR input file based on the last frame of the
<a class="reference internal" href="position_restraints_MD.html#position-restraints"><span>Position restraints MD</span></a> with <a class="reference external" href="http://manual.gromacs.org/current/online/grompp.html">grompp</a>:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ../MD
cp ../templates/md.mdp .
grompp -f md.mdp -p ../top/4ake.top -c ../posres/posres.pdb -o md.tpr -maxwarn 3
</pre></div>
</div>
<p>The <code class="file docutils literal"><span class="pre">md.mdp</span></code> file uses different algorithms from the
<a class="reference internal" href="position_restraints_MD.html#position-restraints"><span>Position restraints MD</span></a> for the temperature and pressure coupling,
which are known to reproduce the exact <em>NPT</em> ensemble distribution.</p>
</div>
<div class="section" id="running-the-simulation">
<h2>5.2. Running the simulation<a class="headerlink" href="#running-the-simulation" title="Permalink to this headline">¶</a></h2>
<p><strong>CPU run</strong></p>
<blockquote>
<div><p>If your workstation has a decent number of cores or if you simply
don&#8217;t mind waiting a bit longer you can also run the simulation as
usual:</p>
<div class="highlight-python"><div class="highlight"><pre>mdrun -v -stepout 10 -s md.tpr -deffnm md -cpi
</pre></div>
</div>
<p>This will automatically utilize all available cores. The <code class="code docutils literal"><span class="pre">-cpi</span></code>
flag indicates that you want Gromacs to continue from a previous
run. You can kill the job with <code class="kbd docutils literal"><span class="pre">CONTROL-C</span></code>, look at the output,
then continue with exactly the same command line</p>
<div class="highlight-python"><div class="highlight"><pre>mdrun -v -stepout 10 -s md.tpr -deffnm md -cpi
</pre></div>
</div>
<p>(Try it out!). The <code class="code docutils literal"><span class="pre">-cpi</span></code> flag can be used on the first run
without harm. For a continuation to occur, Gromacs needs to find the
checkpoint file <code class="file docutils literal"><span class="pre">md.cpt</span></code> and all output files (<code class="file docutils literal"><span class="pre">md.xtc</span></code>,
<code class="file docutils literal"><span class="pre">md.edr</span></code>, <code class="file docutils literal"><span class="pre">md.log</span></code>) in the current directory.</p>
</div></blockquote>
<p><strong>GPU run</strong></p>
<blockquote>
<div><p>We can also try utilizing the GPU(s) available on the workstation. We use
a modified MDP file that contains settings compatible with GPU-based
Gromacs simulations to generate a new TPR file, which is used to perform
the simulation.</p>
<blockquote>
<div>grompp -f mdgpu.mdp -p ../top/4ake.top -c ../posres/posres.pdb -o mdgpu.tpr -maxwarn 3
mdrun -v -stepout 10 -s mdgpu.tpr -deffnm mdgpu -cpi</div></blockquote>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Equilibrium molecular dynamics</a><ul>
<li><a class="reference internal" href="#setup-the-production-run">5.1. Setup the production run</a></li>
<li><a class="reference internal" href="#running-the-simulation">5.2. Running the simulation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="position_restraints_MD.html"
                        title="previous chapter">4. Position restraints MD</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="trajectory_visualization.html"
                        title="next chapter">6. Trajectory visualization</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/equilibrium_MD.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="trajectory_visualization.html" title="6. Trajectory visualization"
             >next</a> |</li>
        <li class="right" >
          <a href="position_restraints_MD.html" title="4. Position restraints MD"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Practical 13: AdK Tutorial 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2013, Oliver Beckstein.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>